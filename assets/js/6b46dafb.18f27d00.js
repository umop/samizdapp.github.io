"use strict";(self.webpackChunksamizdapp_herakles=self.webpackChunksamizdapp_herakles||[]).push([[823],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),d=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=d(e.components);return o.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=d(n),m=r,h=u["".concat(s,".").concat(m)]||u[m]||p[m]||a;return n?o.createElement(h,i(i({ref:t},c),{},{components:n})):o.createElement(h,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var d=2;d<a;d++)i[d]=n[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5385:(e,t,n)=>{n.r(t),n.d(t,{AddNewDevice:()=>p,assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var o=n(7462),r=n(7294),a=n(3905);const i={sidebar_position:1},l="Setup Your Device",s={unversionedId:"getting-started/setup-device",id:"getting-started/setup-device",title:"Setup Your Device",description:"To setup your device, you'll need to connect it to balenaCloud. Balena is used",source:"@site/docs/getting-started/setup-device.mdx",sourceDirName:"getting-started",slug:"/getting-started/setup-device",permalink:"/docs/getting-started/setup-device",draft:!1,editUrl:"https://github.com/samizdapp/samizdapp.github.io/tree/master/docs/getting-started/setup-device.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Getting Started",permalink:"/docs/category/getting-started"},next:{title:"Setup Your Client",permalink:"/docs/getting-started/setup-client"}},d={},c=[{value:"Join the Fleet (Recommended)",id:"join-the-fleet-recommended",level:2},{value:"Self-Managed Deployments (For Developers)",id:"self-managed-deployments-for-developers",level:2},{value:"Add Device to Fleet",id:"add-device-to-fleet",level:3},{value:"Clone the Repository",id:"clone-the-repository",level:3},{value:"Configure Your Dev Environment",id:"configure-your-dev-environment",level:3},{value:"Push a Release",id:"push-a-release",level:3}],p=e=>{let{Success:t=(()=>(0,a.kt)(r.Fragment,null,'You should see your device listed under the "Devices" tab, and you should see it\'s status change to "Online".'))}=e;return(0,a.kt)("ol",{style:{listStyleType:"lower-alpha",margin:"0 0 var(--ifm-list-margin)",paddingLeft:"1em"}},(0,a.kt)("li",null,"Once the device has powered down, remove the SD card from the device."),(0,a.kt)("br",null),(0,a.kt)("li",null,"Power off and power back on the device (by disconnecting and reconnecting the power)."),(0,a.kt)("br",null),(0,a.kt)("li",null,'Close the "Add new device" screen. ',(0,a.kt)(t,{mdxType:"Success"})),(0,a.kt)("br",null),(0,a.kt)("li",null,(0,a.kt)("strong",null,"If the device does not shutdown:")," This means that setup has not completed. Setup should not take more than a few minutes. Reattempt setup by turning the device off and back on. The most common cause of setup not completing is bad WiFi credentials."),(0,a.kt)("br",null),(0,a.kt)("li",null,(0,a.kt)("strong",null,"Note for Rock Pi:")," balena's instructions specify that the device is powered off when the LED is no longer on. The blue LED indicates the device is on; the green LED indicates the device is merely plugged in, and so will not turn off."))};u="Success";var u;const m={toc:c,AddNewDevice:p};function h(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"setup-your-device"},"Setup Your Device"),(0,a.kt)("p",null,"To setup your device, you'll need to connect it to balenaCloud. Balena is used\nfor managing deployments of the SamizdApp software to your device."),(0,a.kt)("p",null,"The recommended way to connect to balena is to join the official SamizdApp\nfleet. However, if you wish to customize the software on your device or\ncontribute to the development of SamizdApp, you'll need to configure\nself-managed deployments."),(0,a.kt)("p",null,"Ensure your device is powered off before beginning."),(0,a.kt)("h2",{id:"join-the-fleet-recommended"},"Join the Fleet (Recommended)"),(0,a.kt)("p",null,"The recommended way to setup your device is to join the official SamizdApp\nfleet."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Open up the fleet at:\n",(0,a.kt)("a",{parentName:"p",href:"https://hub.balena.io/organizations/gh_rynomad/fleets/rock"},"https://hub.balena.io/organizations/gh_rynomad/fleets/rock"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},'Click on "Get started" to add your device to the fleet.')),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},'Follow the instructions on the right of the "Add new device" screen\n(after inserting the SD card, power on the device):'),(0,a.kt)(p,{Success:()=>(0,a.kt)(r.Fragment,null," "),mdxType:"AddNewDevice"})),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Wait for 10 minutes for the device to finish updating, then proceed\nto ",(0,a.kt)("a",{href:"setup-client"},"setup your client"),"."))),(0,a.kt)("h2",{id:"self-managed-deployments-for-developers"},"Self-Managed Deployments (For Developers)"),(0,a.kt)("p",null,"If you wish to customize the software on your device or contribute to the\ndevelopment of SamizdApp, you'll need to manage deployments to your device\nyourself."),(0,a.kt)("h3",{id:"add-device-to-fleet"},"Add Device to Fleet"),(0,a.kt)("p",null,"To setup and configure your device using balena, you'll need to create a free\nbalenaCloud account, create a fleet, and add your device to that fleet.\nThis section assumes your device is a ROCK Pi 4B; however, any of the\n",(0,a.kt)("a",{parentName:"p",href:"https://www.balena.io/docs/reference/hardware/devices/"},"devices that balena supports"),"\nshould work."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Sign up for an account at ",(0,a.kt)("a",{parentName:"p",href:"https://dashboard.balena-cloud.com/"},"https://dashboard.balena-cloud.com/"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},'From the "Fleets" screen, click "Create fleet".')),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Follow the docs at\n",(0,a.kt)("a",{parentName:"p",href:"https://www.balena.io/docs/learn/getting-started/raspberrypi3/nodejs/#create-a-fleet"},"https://www.balena.io/docs/learn/getting-started/raspberrypi3/nodejs/#create-a-fleet"),"\nto finish creating your fleet, adding your device, and provisioning your\ndevice.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},'Follow the remainder of the "Add new device" Instructions section\n(after inserting the SD card, power on the device):'),(0,a.kt)(p,{mdxType:"AddNewDevice"})),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},'Once the device shows up in your fleet dashboard with the status "Online",\nyour device should be ready to go.')),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Remember to remove the SD Card from your device once it is set up."))),(0,a.kt)("h3",{id:"clone-the-repository"},"Clone the Repository"),(0,a.kt)("p",null,"Use Git to clone the Herakles repo into your dev environment:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:samizdapp/herakles.git --recurse-submodules\n")),(0,a.kt)("p",null,"The remainder of the docs will assume that you are in the base directory of\nthe Herakles repo unless otherwise specified:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd herakles/\n")),(0,a.kt)("h3",{id:"configure-your-dev-environment"},"Configure Your Dev Environment"),(0,a.kt)("p",null,"In order to easily deploy code from your dev environment to your device, you'll\nneed to install the balena CLI."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Continue following the same docs as before to install balena CLI:\n",(0,a.kt)("a",{parentName:"li",href:"https://www.balena.io/docs/learn/getting-started/raspberrypi3/nodejs/#install-the-balena-cli"},"https://www.balena.io/docs/learn/getting-started/raspberrypi3/nodejs/#install-the-balena-cli"))),(0,a.kt)("h3",{id:"push-a-release"},"Push a Release"),(0,a.kt)("p",null,"After the CLI is installed, and you have logged in, you can push a release of\nSamizdApp to your device."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Build the ",(0,a.kt)("inlineCode",{parentName:"li"},"daemon/next")," project:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd daemon/next\nnpm install\nnpm run export\ncd ../../\n"))),(0,a.kt)("li",{parentName:"ol"},"Build the entire project and push to your device via balenaCloud (expect\nthis to take awhile before completing):",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"balena push ${org}/${fleet} -m\n")),"where ",(0,a.kt)("inlineCode",{parentName:"li"},"${org}")," is the name of your organization, typically your username,\nand ",(0,a.kt)("inlineCode",{parentName:"li"},"${fleet}")," is the name you gave to you fleet. (The full slug of your\nfleet can easily be copied from the fleet Summary page.)"),(0,a.kt)("li",{parentName:"ol"},"Once the push has successfully completed, balena will propagate it to all\nthe devices in your fleet. You can monitor this in the dashboard page for\nyour device in balenaCloud. Once the release for all services has been\nupdated, the deployment is complete. You can monitor the logs for any\nruntime errors.")))}h.isMDXComponent=!0}}]);