"use strict";(self.webpackChunksamizdapp_herakles=self.webpackChunksamizdapp_herakles||[]).push([[334],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),d=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return o.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=d(n),m=a,h=u["".concat(s,".").concat(m)]||u[m]||c[m]||r;return n?o.createElement(h,l(l({ref:t},p),{},{components:n})):o.createElement(h,l({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var d=2;d<r;d++)l[d]=n[d];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},7026:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(7294),a=n(6010);const r={infoBox:"infoBox_e9zB",error:"error_VLrD",warning:"warning_tygS",info:"info_Wig7"},l=()=>o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",enableBackground:"new 0 0 52 52",version:"1.1",viewBox:"0 0 52 52",xmlSpace:"preserve"},o.createElement("path",{d:"M26 0C11.664 0 0 11.663 0 26s11.664 26 26 26 26-11.663 26-26S40.336 0 26 0zm2 41a2 2 0 01-4 0v-2a2 2 0 014 0v2zm0-8a2 2 0 01-4 0V11a2 2 0 014 0v22z"})),i=e=>{let{type:t="info",children:n}=e;return o.createElement("p",{className:(0,a.Z)(r.infoBox,r[t])},o.createElement("i",null,o.createElement(l,null)),o.createElement("span",null,n))}},73:(e,t,n)=>{n.r(t),n.d(t,{AddNewDevice:()=>u,assets:()=>p,contentTitle:()=>s,default:()=>f,frontMatter:()=>i,metadata:()=>d,toc:()=>c});var o=n(7462),a=n(7294),r=n(3905),l=n(7026);const i={sidebar_position:1},s="BYOB (Bring Your Own Box)",d={unversionedId:"advanced-setup/byob",id:"advanced-setup/byob",title:"BYOB (Bring Your Own Box)",description:"Instead of obtaining a SamizdApp Box from us, you can install SamizdApp on a",source:"@site/docs/advanced-setup/byob.mdx",sourceDirName:"advanced-setup",slug:"/advanced-setup/byob",permalink:"/docs/advanced-setup/byob",draft:!1,editUrl:"https://github.com/samizdapp/samizdapp.github.io/tree/master/docs/advanced-setup/byob.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Advanced Setup",permalink:"/docs/category/advanced-setup"},next:{title:"Connect via WiFi",permalink:"/docs/advanced-setup/connect-wifi"}},p={},c=[{value:"Join the Fleet (Recommended)",id:"join-the-fleet-recommended",level:2},{value:"Self-Managed Deployments (For Developers)",id:"self-managed-deployments-for-developers",level:2},{value:"Add Device to Fleet",id:"add-device-to-fleet",level:3},{value:"Clone the Repository",id:"clone-the-repository",level:3},{value:"Configure Your Dev Environment",id:"configure-your-dev-environment",level:3},{value:"Push a Release",id:"push-a-release",level:3}],u=e=>{let{Success:t=(()=>(0,r.kt)(a.Fragment,null,'You should see your device listed under the "Devices" tab, and you should see it\'s status change to "Online".'))}=e;return(0,r.kt)("ol",{style:{listStyleType:"lower-alpha",margin:"0 0 var(--ifm-list-margin)",paddingLeft:"1em"}},(0,r.kt)("li",null,"Once the device has powered down, remove the SD card from the device.",(0,r.kt)("br",null),(0,r.kt)(l.Z,{mdxType:"InfoBox"},(0,r.kt)("strong",null,"For Rock Pi:")," balena's instructions specify that the device is powered off when the LED is no longer on. The blue LED indicates the device is on; the green LED indicates the device is merely plugged in, and so will not turn off.")),(0,r.kt)("br",null),(0,r.kt)("li",null,"Power off and power back on the device (by disconnecting and reconnecting the power)."),(0,r.kt)("br",null),(0,r.kt)("li",null,'Close the "Add new device" screen. ',(0,r.kt)(t,{mdxType:"Success"})),(0,r.kt)("br",null),(0,r.kt)("li",null,(0,r.kt)("strong",null,"If the device does not shutdown:")," This means that setup has not completed. Setup should not take more than a few minutes. Reattempt setup by turning the device off and back on. The most common cause of setup not completing is bad WiFi credentials."))};m="Success";var m;const h={toc:c,AddNewDevice:u};function f(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"byob-bring-your-own-box"},"BYOB (Bring Your Own Box)"),(0,r.kt)("p",null,"Instead of obtaining a ",(0,r.kt)("em",{parentName:"p"},"SamizdApp Box")," from us, you can install SamizdApp on a\ndevice of your choosing. ",(0,r.kt)("strong",{parentName:"p"},"Note:")," the device must be capable of\n",(0,r.kt)("a",{parentName:"p",href:"https://www.balena.io/os/docs/supported-boards/"},"running balenaOS"),". There may\nalso be additional hardware requirements for running SamizdApp."),(0,r.kt)("p",null,"To setup your box, you'll need to connect it to balenaCloud. Balena is used\nfor managing deployments of the SamizdApp software to your box. The\nrecommended way to connect to balena is to join the official SamizdApp fleet.\nHowever, if you wish to customize the software on your box or contribute to\nthe development of SamizdApp, you'll need to configure self-managed\ndeployments."),(0,r.kt)("p",null,"Ensure your device is powered off before beginning."),(0,r.kt)("h2",{id:"join-the-fleet-recommended"},"Join the Fleet (Recommended)"),(0,r.kt)("p",null,"The recommended way to setup your box is to join the official SamizdApp\nfleet."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Open up the fleet at:\n",(0,r.kt)("a",{parentName:"p",href:"https://hub.balena.io/organizations/gh_rynomad/fleets/alpha"},"https://hub.balena.io/organizations/gh_rynomad/fleets/alpha"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Click on "Get started" to add your device to the fleet.')),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Follow the instructions on the right of the "Add new device" screen\n(after inserting the SD card, power on the device):'),(0,r.kt)(u,{Success:()=>(0,r.kt)(a.Fragment,null," "),mdxType:"AddNewDevice"})),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Wait for 10 minutes for the device to finish updating, then proceed\nto ",(0,r.kt)("a",{href:"../getting-started/install-client"},"install the client"),"."))),(0,r.kt)("h2",{id:"self-managed-deployments-for-developers"},"Self-Managed Deployments (For Developers)"),(0,r.kt)("p",null,"If you wish to customize the software on your box or contribute to the\ndevelopment of SamizdApp, you'll need to manage deployments to your box\nyourself."),(0,r.kt)("h3",{id:"add-device-to-fleet"},"Add Device to Fleet"),(0,r.kt)("p",null,"To setup and configure your box using balena, you'll need to create a free\nbalenaCloud account, create a fleet, and add your device to that fleet.\nThis section assumes your device is a ROCK Pi 4B; however, any of the\n",(0,r.kt)("a",{parentName:"p",href:"https://www.balena.io/docs/reference/hardware/devices/"},"devices that balena supports"),"\nshould work."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Sign up for an account at ",(0,r.kt)("a",{parentName:"p",href:"https://dashboard.balena-cloud.com/"},"https://dashboard.balena-cloud.com/"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'From the "Fleets" screen, click "Create fleet".')),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Follow the docs at\n",(0,r.kt)("a",{parentName:"p",href:"https://www.balena.io/docs/learn/getting-started/raspberrypi3/nodejs/#create-a-fleet"},"https://www.balena.io/docs/learn/getting-started/raspberrypi3/nodejs/#create-a-fleet"),"\nto finish creating your fleet, adding your device, and provisioning your\ndevice.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Follow the remainder of the "Add new device" Instructions section\n(after inserting the SD card, power on the device):'),(0,r.kt)(u,{mdxType:"AddNewDevice"})),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'While you\'re device boots up, go to the "Variables" page (left-hand side\nnavbar) for your fleet; click "Add variable", input the following info,\nand then click "Add":',(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"Service"),': "All services"',(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"Name"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"MDNS_TLD"),(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"Value"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"samizdapp.local"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Now go back to the "Summary" page (left-hand side navbar again) for your\nfleet. Once your device shows up in your fleet dashboard with the status\n"Online", your device should be ready to go.')),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Remember to remove the SD Card from your device once it is set up."))),(0,r.kt)("h3",{id:"clone-the-repository"},"Clone the Repository"),(0,r.kt)("p",null,"Use Git to clone the Herakles repo into your dev environment:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:samizdapp/herakles.git --recurse-submodules\n")),(0,r.kt)("p",null,"The remainder of the docs will assume that you are in the base directory of\nthe Herakles repo unless otherwise specified:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cd herakles/\n")),(0,r.kt)("h3",{id:"configure-your-dev-environment"},"Configure Your Dev Environment"),(0,r.kt)("p",null,"In order to easily deploy code from your dev environment to your box, you'll\nneed to install the balena CLI."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Continue following the same docs as before to install balena CLI:\n",(0,r.kt)("a",{parentName:"li",href:"https://www.balena.io/docs/learn/getting-started/raspberrypi3/nodejs/#install-the-balena-cli"},"https://www.balena.io/docs/learn/getting-started/raspberrypi3/nodejs/#install-the-balena-cli"))),(0,r.kt)("h3",{id:"push-a-release"},"Push a Release"),(0,r.kt)("p",null,"After the CLI is installed, and you have logged in, you can push a release of\nSamizdApp to your box."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Build the entire project and push it to your device via balenaCloud (expect\nthis to take awhile before completing):"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"balena push ${org}/${fleet} -m\n")),(0,r.kt)("p",{parentName:"li"},"where ",(0,r.kt)("inlineCode",{parentName:"p"},"${org}")," is the name of your organization, typically your username,\nand ",(0,r.kt)("inlineCode",{parentName:"p"},"${fleet}")," is the name you gave to you fleet. (The full slug of your\nfleet can easily be copied from the fleet Summary page.)")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Once the push has successfully completed, balena will propagate it to all\nthe devices in your fleet. You can monitor this in the dashboard page for\nyour device in balenaCloud. Once the release for all services has been\nupdated, the deployment is complete. You can monitor the logs for any\nruntime errors."))))}f.isMDXComponent=!0}}]);